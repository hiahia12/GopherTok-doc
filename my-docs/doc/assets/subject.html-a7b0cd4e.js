import{_ as e}from"./plugin-vue_export-helper-c27b6911.js";import{o as r,c as i,e as a}from"./app-97236049.js";const o="/assets/img-7c59dc3b.png",l={},s=a('<h1 id="subject" tabindex="-1"><a class="header-anchor" href="#subject" aria-hidden="true">#</a> Subject</h1><p>数据库设计</p><h2 id="mysql" tabindex="-1"><a class="header-anchor" href="#mysql" aria-hidden="true">#</a> Mysql</h2><figure><img src="'+o+'" alt="img.png" tabindex="0" loading="lazy"><figcaption>img.png</figcaption></figure><ul><li>user<br> username建立唯一索引</li><li>video<br> video_sha256建立唯一索引<br> user_id和create_time建立联合索引，加速根据user_id和create_time条件同时查询的操作，这对于按时间逆序返回用户视频非常有用，因为是按create_time排好序的，避免了文件排序</li></ul><h2 id="redis" tabindex="-1"><a class="header-anchor" href="#redis" aria-hidden="true">#</a> Redis</h2><ul><li>user<br> gophertok-user_{username}为Key，registered为Value判断用户是否已经注册</li><li>video<br> gophertok-video_{file_sha256}为Key,url为Value<br> gophertok-cover_{file_sha256}为Key,url为Value</li><li>follow<br> followerCountHASH中以userid为Key，数量为Value<br> followCountHASH中以userid为Key，数量为Value<br> friendCountHASH中以userid为Key，数量为Value<br> cache:gopherTok:follow🆔{ToUserId}为Key，userid为Value</li><li>favor<br> HASH gophertok:videoFavor:{UserId} 为Key，VideoId 为 Value<br> 使用哈希来记录用户所有点赞的视频id<br> SET gophertok:videoFavor:{VideoId} 为Key，UserId 为 member<br> 使用集合来记录某个视频下面的所有点赞用户的id</li></ul>',7),t=[s];function d(u,c){return r(),i("div",null,t)}const _=e(l,[["render",d],["__file","subject.html.vue"]]);export{_ as default};
